{% extends 'base.html' %}
{% load static %}

{% block title %}Become an Expert - HALO-AI{% endblock %}

{% block content %}
<div class="bg-gradient-to-br from-primary-50 to-secondary-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl shadow-xl text-white p-12 mb-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">Join Our Expert Network</h1>
            <p class="text-xl text-primary-100 max-w-3xl mx-auto mb-8">
                Share your agricultural knowledge with farmers worldwide and earn while making a difference in sustainable farming
            </p>
            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                <div class="flex items-center">
                    <i class="fas fa-users text-secondary-400 text-2xl mr-2"></i>
                    <span class="text-lg">Connect with 10,000+ farmers</span>
                </div>
                <div class="flex items-center">
                    <i class="fas fa-dollar-sign text-secondary-400 text-2xl mr-2"></i>
                    <span class="text-lg">Flexible earning opportunities</span>
                </div>
                <div class="flex items-center">
                    <i class="fas fa-leaf text-secondary-400 text-2xl mr-2"></i>
                    <span class="text-lg">Support sustainable agriculture</span>
                </div>
            </div>
        </div>

        <!-- Benefits Section -->
        <div class="mb-12">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">Why Join HALO-AI as an Expert?</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Flexible Schedule -->
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow duration-300">
                    <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-primary-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Flexible Schedule</h3>
                    <p class="text-gray-600">Set your own availability and work hours that fit your lifestyle</p>
                </div>

                <!-- Global Reach -->
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow duration-300">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-globe text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Global Impact</h3>
                    <p class="text-gray-600">Help farmers worldwide with your expertise and knowledge</p>
                </div>

                <!-- Competitive Rates -->
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow duration-300">
                    <div class="w-16 h-16 bg-secondary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-money-bill-wave text-secondary-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Competitive Rates</h3>
                    <p class="text-gray-600">Set your own rates and earn based on your experience and expertise</p>
                </div>

                <!-- Professional Growth -->
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow duration-300">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-line text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Professional Growth</h3>
                    <p class="text-gray-600">Build your reputation and expand your professional network</p>
                </div>
            </div>
        </div>

        <!-- Application Form -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Expert Application Form</h2>
                    <p class="text-gray-600">Tell us about your expertise and start your journey as an agricultural expert</p>
                </div>

                <form method="POST" enctype="multipart/form-data" class="space-y-8">
                    {% csrf_token %}
                    
                    <!-- Personal Information -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-user text-primary-600 mr-2"></i>
                            Personal Information
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                <input type="text" 
                                       name="first_name" 
                                       id="first_name" 
                                       required 
                                       value="{{ user.first_name }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                            </div>
                            
                            <div>
                                <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                <input type="text" 
                                       name="last_name" 
                                       id="last_name" 
                                       required 
                                       value="{{ user.last_name }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" 
                                       name="email" 
                                       id="email" 
                                       required 
                                       value="{{ user.email }}"
                                       readonly
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                            </div>
                            
                            <div>
                                <label for="phone_number" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                <input type="tel" 
                                       name="phone_number" 
                                       id="phone_number" 
                                       required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                       placeholder="+1 (555) 123-4567">
                            </div>
                        </div>
                    </div>

                    <!-- Professional Information -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-briefcase text-primary-600 mr-2"></i>
                            Professional Information
                        </h3>
                        
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="professional_title" class="block text-sm font-medium text-gray-700 mb-2">Professional Title</label>
                                    <input type="text" 
                                           name="professional_title" 
                                           id="professional_title" 
                                           required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                           placeholder="e.g., Agricultural Engineer, Crop Scientist">
                                </div>
                                
                                <div>
                                    <label for="organization" class="block text-sm font-medium text-gray-700 mb-2">Organization/Institution</label>
                                    <input type="text" 
                                           name="organization" 
                                           id="organization" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                           placeholder="Current or previous organization">
                                </div>
                                
                                <div>
                                    <label for="years_of_experience" class="block text-sm font-medium text-gray-700 mb-2">Years of Experience</label>
                                    <select name="years_of_experience" 
                                            id="years_of_experience" 
                                            required 
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">Select experience</option>
                                        <option value="1">1-2 years</option>
                                        <option value="3">3-5 years</option>
                                        <option value="6">6-10 years</option>
                                        <option value="11">11-15 years</option>
                                        <option value="16">16-20 years</option>
                                        <option value="21">20+ years</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="professional_license" class="block text-sm font-medium text-gray-700 mb-2">Professional License/Certification</label>
                                    <input type="text" 
                                           name="professional_license" 
                                           id="professional_license" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                           placeholder="License number or certification">
                                </div>
                            </div>
                            
                            <div>
                                <label for="education_background" class="block text-sm font-medium text-gray-700 mb-2">Education Background</label>
                                <textarea name="education_background" 
                                          id="education_background" 
                                          rows="4" 
                                          required 
                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                          placeholder="Describe your educational qualifications, degrees, certifications, and relevant training"></textarea>
                            </div>
                            
                            <div>
                                <label for="bio" class="block text-sm font-medium text-gray-700 mb-2">Professional Bio</label>
                                <textarea name="bio" 
                                          id="bio" 
                                          rows="6" 
                                          required 
                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                          placeholder="Tell farmers about yourself, your expertise, and how you can help them. This will be visible on your profile."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Specializations -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-seedling text-primary-600 mr-2"></i>
                            Areas of Expertise
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            {% for specialization in specializations %}
                            <label class="flex items-center p-4 border border-gray-200 rounded-lg hover:bg-primary-50 hover:border-primary-300 cursor-pointer transition-colors">
                                <input type="checkbox" 
                                       name="specializations" 
                                       value="{{ specialization.id }}" 
                                       class="rounded border-gray-300 text-primary-600 focus:ring-primary-500 mr-3">
                                <div>
                                    <div class="font-medium text-gray-900">{{ specialization.name }}</div>
                                    {% if specialization.description %}
                                    <div class="text-sm text-gray-600">{{ specialization.description|truncatewords:8 }}</div>
                                    {% endif %}
                                </div>
                            </label>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Service Details -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-cogs text-primary-600 mr-2"></i>
                            Service Details
                        </h3>
                        
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="consultation_modes" class="block text-sm font-medium text-gray-700 mb-3">Consultation Modes</label>
                                    <div class="space-y-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="consultation_modes" value="online" class="mr-2" required>
                                            <span>Online Only (Video/Phone calls)</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="consultation_modes" value="in_person" class="mr-2" required>
                                            <span>In-Person Only (Farm visits)</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="consultation_modes" value="both" class="mr-2" required>
                                            <span>Both Online & In-Person</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="hourly_rate" class="block text-sm font-medium text-gray-700 mb-2">Hourly Rate (NPR)</label>
                                    <input type="number" 
                                           name="hourly_rate" 
                                           id="hourly_rate" 
                                           required 
                                           min="100" 
                                           step="50"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                           placeholder="e.g., 1500">
                                </div>
                                
                                <div>
                                    <label for="languages_spoken" class="block text-sm font-medium text-gray-700 mb-2">Languages Spoken</label>
                                    <input type="text" 
                                           name="languages_spoken" 
                                           id="languages_spoken" 
                                           required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                           placeholder="e.g., English, Nepali, Hindi">
                                </div>
                                
                                <div>
                                    <label for="profile_image" class="block text-sm font-medium text-gray-700 mb-2">Profile Photo</label>
                                    <input type="file" 
                                           name="profile_image" 
                                           id="profile_image" 
                                           accept="image/*"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                    <p class="text-sm text-gray-500 mt-1">Upload a professional photo (optional)</p>
                                </div>
                            </div>
                            
                            <div>
                                <label for="service_areas" class="block text-sm font-medium text-gray-700 mb-2">Service Areas</label>
                                <textarea name="service_areas" 
                                          id="service_areas" 
                                          rows="3" 
                                          required 
                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                          placeholder="List the geographic areas where you can provide services (for in-person consultations)"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Documents -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-file-alt text-primary-600 mr-2"></i>
                            Verification Documents
                        </h3>
                        
                        <div>
                            <label for="verification_documents" class="block text-sm font-medium text-gray-700 mb-2">Upload Documents</label>
                            <input type="file" 
                                   name="verification_documents" 
                                   id="verification_documents" 
                                   accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                            <p class="text-sm text-gray-500 mt-2">
                                Upload relevant documents such as degrees, certifications, licenses, or professional credentials. 
                                Accepted formats: PDF, DOC, DOCX, JPG, PNG (Max 10MB)
                            </p>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <label class="flex items-start">
                            <input type="checkbox" 
                                   name="agree_terms" 
                                   required 
                                   class="rounded border-gray-300 text-primary-600 focus:ring-primary-500 mr-3 mt-1">
                            <div class="text-sm text-gray-700">
                                I agree to the <a href="#" class="text-primary-600 hover:text-primary-700 underline">Terms of Service</a> 
                                and <a href="#" class="text-primary-600 hover:text-primary-700 underline">Expert Guidelines</a>. 
                                I understand that my application will be reviewed and I will be notified of the decision within 3-5 business days.
                            </div>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" 
                                class="bg-primary-600 hover:bg-primary-700 text-white px-12 py-4 rounded-lg font-semibold text-lg transition-colors duration-200 inline-flex items-center">
                            <i class="fas fa-paper-plane mr-2"></i>
                            Submit Application
                        </button>
                        <p class="text-sm text-gray-500 mt-3">
                            Your application will be reviewed by our team within 3-5 business days
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
  .benefit-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem auto;
    font-size: 1.5rem;
    color: white;
  }

  .specialization-checkbox {
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .specialization-checkbox:hover {
    border-color: #007bff;
    background-color: #f8f9ff;
  }

  .specialization-checkbox input:checked + label {
    font-weight: bold;
    color: #007bff;
  }

  .specialization-checkbox input:checked ~ .specialization-checkbox {
    border-color: #007bff;
    background-color: #e7f1ff;
  }

  .requirements-list {
    background-color: #e7f5e7;
    border: 1px solid #c3e6cb;
    border-radius: 8px;
    padding: 1.5rem;
  }

  .step-indicator {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
  }

  .step {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #e9ecef;
    color: #6c757d;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 1rem;
    font-weight: bold;
  }

  .step.active {
    background-color: #007bff;
    color: white;
  }

  .step.completed {
    background-color: #28a745;
    color: white;
  }

  .form-section {
    display: none;
  }

  .form-section.active {
    display: block;
  }
</style>
{% endblock %}

{% block extra_js %}
<script>
  // Form validation
  document
    .getElementById("expertApplicationForm")
    .addEventListener("submit", function (e) {
      const selectedSpecs = document.querySelectorAll(
        'input[name="specializations"]:checked'
      );
      if (selectedSpecs.length < 2) {
        e.preventDefault();
        alert("Please select at least 2 specializations.");
        return;
      }

      // Show loading state
      const submitBtn = this.querySelector('button[type="submit"]');
      submitBtn.innerHTML =
        '<i class="fas fa-spinner fa-spin"></i> Submitting...';
      submitBtn.disabled = true;
    });

  // Specialization checkbox styling
  document
    .querySelectorAll('input[name="specializations"]')
    .forEach(function (checkbox) {
      checkbox.addEventListener("change", function () {
        const card = this.closest(".specialization-checkbox");
        if (this.checked) {
          card.style.borderColor = "#28a745";
          card.style.backgroundColor = "#e7f5e7";
        } else {
          card.style.borderColor = "#e9ecef";
          card.style.backgroundColor = "white";
        }
      });
    });

  // Phone number formatting
  document
    .getElementById("phone_number")
    .addEventListener("input", function (e) {
      let value = e.target.value.replace(/\D/g, "");
      if (value.length >= 10) {
        value = value.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3");
      }
      e.target.value = value;
    });
</script>
{% endblock %}